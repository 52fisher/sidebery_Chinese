@import '../../../mixins'

#root[data-color-scheme="dark"]
  --stats-bar-border: #ffffff64
#root[data-color-scheme="light"]
  --stats-bar-border: #00000064

.StatsPanel
  position: absolute
  display: flex
  width: 100%
  height: 100%
  flex-direction: column
  z-index: 100
  transition: transform var(--d-fast), opacity var(--d-fast), z-index var(--d-fast)

.StatsPanel .or
  text-align: center
  color: var(--frame-fg)
  padding: 32px 0 0 0
  font-size: rem(18)
  font-weight: 700

// ---
// -- Controls
// -
.StatsPanel .ctrls
  position: relative
  display: flex
  justify-content: space-between
  align-items: center
  flex-shrink: 0
  background-color: var(--toolbar-bg)
  box-shadow: 0 0 0 1px var(--ff-border)
  margin: 0 0 1px

.StatsPanel .ctrls .scale
  position: relative
  display: flex
  justify-content: center
  align-items: center
  width: 100%
  height: 100%

.StatsPanel .ctrls .scale .title
  position: relative
  align-items: center
  font-size: rem(14)
  font-weight: 700
  color: var(--toolbar-fg)
  padding: 6px 8px
  opacity: .64
  transition: opacity var(--d-norm)
  white-space: nowrap
  overflow: hidden
  text-overflow: ellipsis
.StatsPanel .ctrls .scale:hover .title
  opacity: 1

.StatsPanel .ctrls .scale .up-scale
.StatsPanel .ctrls .scale .down-scale
  position: absolute
  width: 50%
  height: 100%
  top: 0
  left: 0
  z-index: 1
  opacity: .64
  transition: opacity var(--d-norm)
  &:before
    content: ''
    position: absolute
    top: 2px
    left: 2px
    height: calc(100% - 4px)
    aspect-ratio: 1
    border-radius: 4px
    background-color: var(--toolbar-fg)
    opacity: 0
  > svg
    position: absolute
    width: 16px
    height: 16px
    top: calc(50% - 8px)
    left: 6px
    fill: var(--toolbar-fg)
    transform: rotateZ(90deg)
    opacity: .7
  &:hover
    opacity: 1
  &:hover:before
    opacity: .08
  &:active:before
    opacity: .05
.StatsPanel .ctrls .scale .down-scale
  left: 50%
  &:before
    left: auto
    right: 2px
  > svg
    left: auto
    right: 6px
    transform: rotateZ(-90deg)

.StatsPanel .ctrls .info
  position: relative
  width: 100%
  display: flex
  align-items: center
  padding: 3px 4px
  font-size: rem(14)
  font-weight: 400
  color: var(--toolbar-fg)
  white-space: nowrap
  overflow: hidden

.StatsPanel .ctrls .info .date
  padding: 4px 0
  margin: 0 5px
  font-size: rem(16)
  font-weight: 700
  flex-grow: 1

.StatsPanel .ctrls .info .fav
  position: relative
  width: 16px
  height: 16px
  flex-shrink: 0
  margin: 2px 4px 2px 0
  > svg
  > img
    position: absolute
    width: 16px
    height: 16px
    fill: var(--toolbar-fg)
    filter: drop-shadow(0 0 3px #00000032)
  > svg
    opacity: .7

.StatsPanel .ctrls .info .title
  position: relative
  flex-grow: 1
  overflow: hidden
  padding: 4px 0
  font-size: rem(16)
  font-weight: 700
  mask: linear-gradient(-90deg, transparent, #000000 12px, #000000)

.StatsPanel .ctrls .info .reset
  position: relative
  width: 24px
  height: 24px
  margin-left: 2px
  margin-right: -2px
  flex-shrink: 0
  cursor: pointer
  opacity: .7
  border-radius: 4px
  &:hover
    background-color: var(--hover-bg)
    opacity: 1
  &:active
    opacity: .5
  > svg
    position: absolute
    top: calc(50% - 9px)
    left: calc(50% - 9px)
    width: 18px
    height: 18px
    fill: var(--toolbar-fg)

// ---
// -- Domains
// -
.StatsPanel .ScrollBox.-domains
  height: 50%

.StatsPanel .domains
  position: relative
  display: flex
  flex-direction: column
  width: 100%
  height: 100%
  padding: 0 0 8px

.StatsPanel .domain
  position: relative
  display: flex
  align-items: center
  margin: 1px 2px
  padding: 3px 0 4px
  border-radius: 4px
  &:before
    content: ''
    position: absolute
    top: 0
    left: 0
    width: 100%
    height: 100%
    background-color: var(--frame-fg)
    opacity: 0
    border-radius: 4px
    box-shadow: inset 0 0 0 1px var(--frame-fg)
  &:hover:before
    opacity: .12
  &:active:before
    opacity: .16
  &[data-active="true"]:before
    background-color: transparent
    opacity: .5

.StatsPanel .domain .fav
  position: relative
  width: 16px
  height: 16px
  flex-shrink: 0
  margin: 0 0 0 4px

.StatsPanel .domain .fav > svg
.StatsPanel .domain .fav > img
  position: absolute
  width: 16px
  height: 16px
  top: 0
  left: 0
  fill: var(--frame-fg)
.StatsPanel .domain .fav > svg
  opacity: .7

.StatsPanel .domain .title
  position: relative
  width: 100%
  margin: 0 0 0 6px
  font-size: rem(15)
  color: var(--frame-fg)
  white-space: nowrap
  overflow: hidden
  transition: transform var(--d-fast), color var(--d-fast)
  mask: linear-gradient(-90deg, transparent, #000000 12px, #000000)

.StatsPanel .domain .info
  position: relative
  margin: 0 5px
  flex-shrink: 0
  font-size: rem(12)
  color: var(--frame-fg)
  white-space: nowrap
  overflow: hidden
  opacity: .7

.StatsPanel .domain .bar
  position: absolute
  top: 2px
  left: 23px
  width: calc(var(--fraction) - 25px)
  min-width: 5px
  height: calc(100% - 4px)
  box-shadow: inset 0 0 0 1px var(--stats-bar-border)
  background-color: var(--frame-fg)
  border-radius: 4px
  opacity: .2

// ---
// -- Ranges
// -
.StatsPanel .ranges
  position: relative
  width: 100%
  height: 100%

.StatsPanel .ranges .group
  padding: 0 0 8px

.StatsPanel .ranges .group .title
  position: relative
  display: flex
  justify-content: center
  align-items: center
  padding: 16px 0 12px
  font-size: rem(16)
  font-weight: 700
  color: var(--frame-fg)
  pointer-events: none

.StatsPanel .range
  position: relative
  display: flex
  width: calc(100% - 4px)
  flex-direction: column
  justify-content: center
  margin: 1px 2px
  &:before
    content: ''
    position: absolute
    top: 0
    left: 0
    width: 100%
    height: 100%
    background-color: var(--frame-fg)
    opacity: 0
    border-radius: 5px
    box-shadow: inset 0 0 0 1px var(--frame-fg)
  &:hover:before
    opacity: .12
  &:active:before
    opacity: .16
  &[data-active="true"]:before
    background-color: transparent
    opacity: .5

.StatsPanel .range .info
  position: relative
  display: flex
  align-items: center
  height: 18px
  font-size: rem(12)
  color: var(--frame-fg)
  margin: 2px 0 2px 5px
  z-index: 1

.StatsPanel .range .date
.StatsPanel .range .passed
  white-space: nowrap
  overflow: hidden
  text-overflow: ellipsis
.StatsPanel .range .passed
  margin: 0 8px 0 auto
  opacity: .7

.StatsPanel .range .bar
  position: absolute
  top: 2px
  left: 2px
  width: calc(var(--fraction) - 4px)
  min-width: 5px
  height: calc(100% - 4px)
  overflow: hidden
  border-radius: 4px
  background-color: var(--frame-fg)
  box-shadow: inset 0 0 0 1px var(--stats-bar-border)
  opacity: .2
