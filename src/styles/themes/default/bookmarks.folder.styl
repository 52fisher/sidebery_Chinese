@import '../../mixins'

.Folder
  box(relative)
  padding: 0 0 0 12px
  margin: 0
  border-top-left-radius: 3px
  border-bottom-left-radius: 3px
  &:before
    content: ''
    box(absolute)
    pos(0, r: 0)
    size(100vw, 100%)
    background-color: var(--tabs-selected-bg)
    z-index: -1
    opacity: 0
    transform: scale(0, 0)
    transition: opacity var(--d-fast),
                z-index var(--d-fast),
                transform 0s var(--d-fast)

  &:not(.-parent) // Empty folder
    > .body
    > .body:hover
    > .body:active
      > .title
        color: var(--bookmarks-folder-empty-fg)
  > .body
    height: var(--bookmarks-folder-height)
    &:hover > .title
      transition: transform var(--d-fast)
      color: var(--bookmarks-folder-closed-fg-hover)
    &:active > .title
      transition: none
      color: var(--bookmarks-folder-closed-fg-active)
    > .title
      font: var(--bookmarks-folder-font)
      color: var(--bookmarks-folder-closed-fg)

// > Expanded
.Folder.-expanded.-parent
  > .body
    &:hover > .title
      color: var(--bookmarks-folder-open-fg-hover)
    &:active > .title
      color: var(--bookmarks-folder-open-fg-active)
    > .title
      color: var(--bookmarks-folder-open-fg)
      mask: linear-gradient(-90deg, transparent 12px, #000000 24px, #000000)
      transform: translateX(12px)
  > .body > .exp
    transform: translateX(-6px)
    opacity: 1
  > .body > .exp > svg
    transform: rotateZ(0deg)

.Folder.-selected
  &:before
    opacity: 1
    z-index: 0
    transform: scale(1, 1)
    transition: opacity var(--d-fast),
                z-index var(--d-fast),
                transform 0s 0s
  > .body > .title
  > .body:hover > .title
    color: var(--tabs-selected-fg)

// Body of node
.Folder > .body
  box(relative, flex)
  align-items: center
  cursor: pointer
  transform: translateZ(0)
  transition: opacity var(--d-fast)
  &:before
    content: ''
    box(absolute)
    pos(0, r: 0)
    size(100vw, 100%)

.Folder:not(.-selected).-opened > .body > .title
.Folder:not(.-selected).-opened > .body:hover > .title
  color: var(--active-fg)

.Folder:not(.-selected) > .body:hover:before
  background-color: var(--bookmarks-node-bg-hover)
.Folder:not(.-selected) > .body:active:before
  background-color: var(--bookmarks-node-bg-active)

.Folder .drag-layer
  box(absolute)
  size(100%, same)
  pos(0, 0)
  z-index: 15

// Title
.Folder .title
  box(relative)
  size(100%)
  white-space: nowrap
  overflow: hidden
  transition: transform var(--d-fast), color var(--d-fast)
  mask: linear-gradient(-90deg, transparent, #000000 12px, #000000)

// Node's children box
.Folder .children
  box(relative)
  transform: translateZ(0)
  &:before
    content: ''
    box(absolute)
    size(1px, calc(100% - 11px))
    pos(0, 1px)
    background-color: #72727264
    opacity: .5
    transition: opacity var(--d-slow)
  &:hover:before
    opacity: 1

// Expanded state icon
.Folder .exp
  box(absolute)
  size(15px, same)
  margin: 1px 2px 0 0
  flex-shrink: 0
  transform: translateX(-14px)
  opacity: 0
  transition: transform var(--d-fast), opacity var(--d-fast)
.Folder .exp > svg
  box(absolute)
  pos(0, 0)
  size(100%, same)
  fill: var(--bookmarks-folder-open-fg)
  transform: rotateZ(-90deg)
  transition: transform var(--d-fast)

// --- Vue transitions ---
.expand-enter-active
  transition: opacity var(--d-norm), transform var(--d-fast)
.expand-enter
  opacity: 0
  transform: translateX(-12px)
.expand-enter-to
.expand-leave
  opacity: 1
  transform: translateX(0)
